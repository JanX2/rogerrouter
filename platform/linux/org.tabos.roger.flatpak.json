{
	"app-id": "org.tabos.roger",
	"runtime": "org.gnome.Platform",
	"runtime-version": "3.24",
	"sdk": "org.gnome.Sdk",
	"command": "roger",
	"tags": ["nightly"],
	"desktop-file-name-prefix": "(Nightly) ",
	"finish-args": [
		/* X11 + XShm access */
		"--socket=x11", "--share=ipc",
		/* Wayland access */
		"--socket=wayland",
		/* Needs to talk to the network: */
		"--share=network",
		/* Access to home directory (e.g. fax-reports) */
		"--filesystem=home",
		/* Needed for dconf to work */
		"--filesystem=xdg-run/dconf", "--filesystem=~/.config/dconf:ro",
		"--talk-name=ca.desrt.dconf", "--env=DCONF_USER_CONFIG_DIR=.config/dconf",
		/* Pulseaudio */
		"--socket=pulseaudio",
		/* We need access to auth agents */
		"--talk-name=org.freedesktop.secrets",
		"--filesystem=xdg-run/keyring",
		/* Statusicon + AppIndicator */
		"--talk-name=org.kde.StatusNotifierWatcher",
		"--talk-name=com.canonical.indicator.application"
	],
	"build-options" : {
		"cflags": "-O2 -g",
		"cxxflags": "-O2 -g"
	},
	"cleanup": [
		"/include", "/lib/pkgconfig",
		"/share/pkgconfig", "/share/aclocal",
		"/man", "/share/man", "/share/gtk-doc",
		"/share/vala", "*.la", "*.a",
		"/lib/girepository-1.0", "/share/info", "/share/gtksourceview-3.0",
		"/share/doc", "/share/gir-1.0"
	],
	"modules": [
		"libappindicator.json",
		{
			"name": "gssdp",
			"cleanup": [ "/bin" ],
			"sources": [
				{
					"type": "archive",
					"url": "https://download.gnome.org/sources/gssdp/1.0/gssdp-1.0.2.tar.xz",
					"sha256": "a1e17c09c7e1a185b0bd84fd6ff3794045a3cd729b707c23e422ff66471535dc"
				}
			]
		},
		{
			"name": "gupnp",
			"cleanup": [ "/bin" ],
			"sources": [
				{
					"type": "archive",
					"url": "https://download.gnome.org/sources/gupnp/1.0/gupnp-1.0.2.tar.xz",
					"sha256": "5173fda779111c6b01cd4a5e41b594322be9d04f8c74d3361f0a0c2069c77610"
				}
			]
		},
		{
			"name": "capi20",
			"sources": [
				{
					"type": "archive",
					"url": "https://www.tabos.org/wp-content/uploads/2017/03/capi20-v3.tar.xz",
					"sha256": "d6612fc5472cd40f56de4463975eae602dcab38dc285c0c7d4059a5a35a39724"
				}
			]
		},
		{
			"name": "spandsp",
			"sources": [
				{
					"type": "archive",
					"url": "https://www.soft-switch.org/downloads/spandsp/spandsp-0.0.6pre21.tgz",
					"sha256": "bd152152bf0b204661ab9439c5a649098bcb8cefebcbfa959dd602442739aa50"
				}
			]
		},
		{
			"name": "ghostscript",
			"config-opts": ["--disable-cups", "--disable-dbus", "--disable-gtk", "--without-ijs", "--without-luratech", "--without-jbig2dec"],
			"make-args": ["so"],
			"make-install-args": [ "soinstall" ],
			"cleanup": [ "/bin", "/share/man", "/share/ghostscript/9.21/doc/", "/share/ghostscript/9.21/examples" ],
			"sources": [
				{
					"type": "archive",
					"url": "https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs921/ghostscript-9.21.tar.gz",
					"sha256": "02bceadbc4dddeb6f2eec9c8b1623d945d355ca11b8b4df035332b217d58ce85"
				}
			]
		},
		{
			"name": "liboauth",
			"sources": [
				{
					"type": "archive",
					"url": "http://netix.dl.sourceforge.net/project/liboauth/liboauth-1.0.3.tar.gz",
					"sha256": "0df60157b052f0e774ade8a8bac59d6e8d4b464058cc55f9208d72e41156811f"
				}
			]
		},
		{
			"name": "libgdata",
			"config-opts": [ "--disable-always-build-tests", "--disable-Werror", "--disable-static", "--enable-goa=no" ],
			"sources": [
				{
					"type": "git",
					"url": "git://git.gnome.org/libgdata"
				}
			]
		},
		{
			"name": "librm",
			"buildsystem": "meson",
			"builddir": true,
			"config-opts": ["--libdir=/app/lib", "--buildtype=release"],
			"sources": [
				{
					"type": "git",
					"url": "ssh://git@git.krueger-it.net:10022/tabos.org/librm.git"
				}
			]
		},
		{
			"name": "roger",
			"config-opts": ["--libdir=/app/lib", "--buildtype=release", "-Dfax_spooler=false"],
			"buildsystem": "meson",
			"builddir": true,
			"sources": [
				{
					"type": "git",
					"url": "../../"
				}
			]
		}
	]
}
