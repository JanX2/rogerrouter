{
  "id": "org.tabos.roger",
  "runtime": "org.gnome.Platform",
  "runtime-version": "3.24",
  "sdk": "org.gnome.Sdk",
  "command": "roger",
  "desktop-file-name-prefix": "(Nightly) ",
  "rename-icon": "roger",
  "finish-args": [
     /* X11 + XShm access */
     "--socket=x11", "--share=ipc",
     /* Wayland access */
     "--socket=wayland",
     /* Needs to talk to the network: */
     "--share=network",
     /* Needed for dconf to work */
     "--filesystem=xdg-run/dconf", "--filesystem=~/.config/dconf:ro",
     "--talk-name=ca.desrt.dconf", "--env=DCONF_USER_CONFIG_DIR=.config/dconf",
     /* Spooler access */
     "--filesystem=/var/spool/rm",
     /* LD_LIBRARY_PATH */
     "--env=LD_LIBRARY_PATH=/app/lib64:/app/lib",
     /* Pulseaudio */
     "--socket=pulseaudio"
  ],
  "cleanup": ["/include", "/lib/pkgconfig",
                "/share/pkgconfig", "/share/aclocal",
                "/man", "/share/man", "/share/gtk-doc",
                "*.la", "*.a",
                "/lib/girepository-1.0",
                "/share/doc", "/share/gir-1.0"
  ],
  "modules": [
    {
      "name": "gssdp",
      "sources": [
        {
          "type": "archive",
          "url": "https://download.gnome.org/sources/gssdp/1.0/gssdp-1.0.2.tar.xz",
          "sha256": "a1e17c09c7e1a185b0bd84fd6ff3794045a3cd729b707c23e422ff66471535dc"
        }
      ]
    },
    {
      "name": "gupnp",
      "sources": [
        {
          "type": "archive",
          "url": "https://download.gnome.org/sources/gupnp/1.0/gupnp-1.0.2.tar.xz",
          "sha256": "5173fda779111c6b01cd4a5e41b594322be9d04f8c74d3361f0a0c2069c77610"
        }
      ]
    },
    {
      "name": "capi20",
      "sources": [
        {
          "type": "archive",
          "url": "https://www.tabos.org/wp-content/uploads/2017/03/capi20-v3.tar.xz",
          "sha256": "d6612fc5472cd40f56de4463975eae602dcab38dc285c0c7d4059a5a35a39724"
        }
      ]
    },
    {
      "name": "spandsp",
      "sources": [
        {
          "type": "archive",
          "url": "http://www.tabos.de/spandsp-0.0.6pre21.tgz",
          "sha256": "bd152152bf0b204661ab9439c5a649098bcb8cefebcbfa959dd602442739aa50"
        }
      ]
    },
    {
      "name": "ghostscript",
      "config-opts": ["--disable-cups", "--disable-dbus", "--disable-gtk", "--without-ijs", "--without-luratech", "--without-jbig2dec"],
      "make-args": ["so"],
      "make-install-args": [ "soinstall" ],
      "cleanup": [ "/bin", "/share/man", "/share/ghostscript/9.21/doc/", "/share/ghostscript/9.21/examples" ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs921/ghostscript-9.21.tar.gz",
          "sha256": "02bceadbc4dddeb6f2eec9c8b1623d945d355ca11b8b4df035332b217d58ce85"
        }
      ]
    },
    {
      "name": "meson",
      "no-autogen": true,
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/mesonbuild/meson/releases/download/0.40.1/meson-0.40.1.tar.gz",
          "sha256": "890ce46e713ea0d061f8203c99fa7d38645354a62e4c207c38ade18db852cbf5"
        },
        {
          "type": "file",
          "path": "setuptools-makefile",
          "dest-filename": "Makefile"
        }
      ]
    },
    {
      "name": "roger",
      "config-opts": ["-Dfax_spooler=false"],
      "buildsystem": "meson",
      "builddir": true
    }
  ]
}
